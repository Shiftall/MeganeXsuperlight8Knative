@if(settings){
<div class="field">
    <div class="title">
        <span i18n>Enable MeganeX 8K Driver</span>
        @if(settings.enable!=defaults?.enable){
        <button mat-icon-button (click)="resetOption('enable')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <mat-slide-toggle [(ngModel)]="settings.enable" (ngModelChange)="saveConfigSettings()"></mat-slide-toggle>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Resolution</span>
        @if(resolutionModel!=defaults?.resolutionX){
        <button mat-icon-button (click)="resetResolution()" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <mat-select [(ngModel)]="resolutionModel" (ngModelChange)="setResolution()">
            @for(p of resolutionOptions;track p.x){
            <mat-option [value]="p.x">{{p.name}}&nbsp;({{p.x}}x{{p.y}})</mat-option>
            }
        </mat-select>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Distortion Profile</span>
        @if(settings.distortionProfile!=defaults?.distortionProfile){
        <button mat-icon-button (click)="resetOption('distortionProfile')" matTooltip="Reset to default"
            i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <mat-select [(ngModel)]="settings.distortionProfile" (ngModelChange)="saveConfigSettings()">
            @for(p of profiles;track p.name){
            <mat-option [value]="p.name">{{p.name}}</mat-option>
            }
        </mat-select>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>IPD</span>
        @if(settings.ipd!=defaults?.ipd){
        <button mat-icon-button (click)="resetOption('ipd')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.ipd" step="0.5" (ngModelChange)="saveConfigSettings()" type="number">
        <mat-slider max="80" min="50" step="0.5" showTickMarks>
            <input matSliderThumb [(ngModel)]="settings.ipd" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Max Fov Horizontal</span>
        @if(settings.maxFovX!=defaults?.maxFovX){
        <button mat-icon-button (click)="resetOption('maxFovX')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.maxFovX" step="1" (ngModelChange)="saveConfigSettings()" type="number">
        <mat-slider [max]="110" min="0" step="1">
            <input matSliderThumb [(ngModel)]="settings.maxFovX" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Max Fov Vertical</span>
        @if(settings.maxFovY!=defaults?.maxFovY){
        <button mat-icon-button (click)="resetOption('maxFovY')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.maxFovY" step="1" (ngModelChange)="saveConfigSettings()" type="number">
        <mat-slider [max]="96" min="0" step="1">
            <input matSliderThumb [(ngModel)]="settings.maxFovY" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Distortion Zoom</span>
        @if(settings.distortionZoom!=defaults?.distortionZoom){
        <button mat-icon-button (click)="resetOption('distortionZoom')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.distortionZoom" step="0.002" (ngModelChange)="saveConfigSettings()"
            type="number">
        <mat-slider max="1.1" min="0.9" step="0.002" showTickMarks>
            <input matSliderThumb [(ngModel)]="settings.distortionZoom" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>

@if(advanceMode()){

<div class="field">
    <div class="section-title">
        <span i18n>Advanced Settings</span>
    </div>
</div>

<div class="field">
    <div class="title">
        <span i18n>Black Level</span>
        @if(settings.blackLevel!=defaults?.blackLevel){
        <button mat-icon-button (click)="resetOption('blackLevel')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.blackLevel" step="0.001" (ngModelChange)="saveConfigSettings()"
            type="number">
        <mat-slider max="1" min="0" step="0.001" showTickMarks>
            <input matSliderThumb [(ngModel)]="settings.blackLevel" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>IPD Offset</span>
        @if(settings.ipdOffset!=defaults?.ipdOffset){
        <button mat-icon-button (click)="resetOption('ipdOffset')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.ipdOffset" step="0.5" (ngModelChange)="saveConfigSettings()"
            type="number">
        <mat-slider max="20" min="-20" step="0.5" showTickMarks>
            <input matSliderThumb [(ngModel)]="settings.ipdOffset" (ngModelChange)="saveConfigSettings()">
        </mat-slider>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Subpixel Shift</span>
        @if(settings.subpixelShift!=defaults?.subpixelShift){
        <button mat-icon-button (click)="resetOption('subpixelShift')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.subpixelShift" (ngModelChange)="saveConfigSettings()" type="number"
            step="0.01">
        <mat-select [(ngModel)]="settings.subpixelShift" (ngModelChange)="saveConfigSettings()">
            @for(opt of subpixelShiftOptions;track opt){
            <mat-option [value]="opt">{{opt|number}}</mat-option>
            }
        </mat-select>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>Distortion Mesh Resolution</span>
        @if(settings.distortionMeshResolution!=defaults?.distortionMeshResolution){
        <button mat-icon-button (click)="resetOption('distortionMeshResolution')" matTooltip="Reset to default"
            i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <input matInput [(ngModel)]="settings.distortionMeshResolution" (ngModelChange)="saveConfigSettings()" type="number"
            step="16">
        <mat-select [(ngModel)]="settings.distortionMeshResolution" (ngModelChange)="saveConfigSettings()">
            @for(opt of distortionMeshResolutionOptions;track opt){
            <mat-option [value]="opt">{{distortionMeshResolutionOptionsText[opt]}}</mat-option>
            }
        </mat-select>
    </div>
</div>
<div class="field">
    <div class="title">
        <span i18n>FOV Burn-In Prevention</span>
        @if(settings.fovBurnInPrevention!=defaults?.fovBurnInPrevention){
        <button mat-icon-button (click)="resetOption('fovBurnInPrevention')" matTooltip="Reset to default" i18n-matTooltip>
            <mat-icon class="tertiary-color">refresh</mat-icon>
        </button>
        }
    </div>
    <div class="control">
        <mat-slide-toggle [(ngModel)]="settings.fovBurnInPrevention" (ngModelChange)="saveConfigSettings()"></mat-slide-toggle>
    </div>
</div>
}
}@else {
<h2 i18n>Setting file not found , please install CustomHeadsetOpenVR driver and launch steamVR</h2>
}